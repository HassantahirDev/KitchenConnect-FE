<!--
    HealthCloud, a hospital management software.
    Copyright (C) 2017-2018 Vicenna
    mailto:support AT vicenna DOT com

   HealthCloud is paid software; you cannot redistribute it and/or modify it. 
-->
<div
  layout
  ng-keydown="diagnosticsList.arrowKeyEvents($event)"
  tabindex="0"
  style="outline: none"
  id="diagnostics-list-main"
>
  <div flex="35" class="z-index-3">
    <div class="scroll-bar-wrap z-index-4">
      <div
        class="scroll-box diagnosis-table-scroll z-index-4"
        style="height: calc(100vh - 118px)"
      >
        <div
          ng-class="{'diagnosis-active-class': diagnosticsList.toggleActive || diagnosticsList.toggleSubRowActive, 'diagnosis-deactive-class': !diagnosticsList.toggleActive && !diagnosticsList.toggleSubRowActive, 'diag-deactiveInteract': diagnosticsList.advancedFiltersActive}"
          class="diagnosis-rows-div"
        >
          <div
            layout="row"
            flex
            class="diagnosis-test-header"
            ng-show="!diagnosticsList.advancedFiltersActive"
          >
            <div
              ng-if="!diagnosticsList.isAnyReportSelected"
              id="diagnostic-department-filter"
              layout
              layout-align="start center"
              flex="35"
              ng-cloak
              class="margin-left-0 diag-filter"
            >
              <md-autocomplete
                ng-hide="true"
                md-selected-item="diagnosticsList.selectedDiagDepartment"
                md-selected-item-change="diagnosticsList.searchBasic(patientId,item.id, 'departSearch', blockUI, unBlockUI, false)"
                md-search-text="diagnosticsList.search.departSearchText"
                md-items="item in diagnosticsList.diagSearchDepart(diagnosticsList.search.departSearchText)"
                md-item-text="item.display"
                md-min-length="0"
                placeholder="Department"
                md-input-id="autoCompleteDepart"
              >
                <md-item-template>
                  <span
                    md-highlight-text="diagnosticsList.departSearchText"
                    md-highlight-flags="^i"
                    >{{item.display}}</span
                  >
                </md-item-template>
                <md-not-found>
                  No departments matching
                  "{{diagnosticsList.search.departSearchText}}" were found.
                </md-not-found>
              </md-autocomplete>
              <div layout layout-align="center center">
                <span
                  ng-click="diagnosticsList.departSearchReset()"
                  class="diag-filter-drop-arrow diag-filter-break"
                  ><i class="material-icons" aria-hidden="true"
                    >{{ctrl.labelType.dropdownArrow}}</i
                  ></span
                >
              </div>
            </div>
            <!-- <div id="diagnostic-doctor-filter" layout layout-align="start center" flex="35" ng-cloak class="margin-left-13 diag-filter">
                            <md-autocomplete md-selected-item="diagnosticsList.selectedDiagDoc" md-selected-item-change="diagnosticsList.searchBasic(patientId,item.id, 'docSearch', blockUI, unBlockUI)" md-search-text="diagnosticsList.search.docSearchText" md-items="item in diagnosticsList.diagSearchDoc(diagnosticsList.search.docSearchText)"
                                md-item-text="item.display" md-min-length="0" placeholder="Referring Doctor" md-input-id="autoCompleteDoc">
                                <md-item-template>
                                    <span md-highlight-text="diagnosticsList.docSearchText" md-highlight-flags="^i">{{item.display}}</span>
                                </md-item-template>
                                <md-not-found>
                                    No doctors matching "{{diagnosticsList.search.docSearchText}}" were found.
                                </md-not-found>
                            </md-autocomplete>
                            <div layout layout-align="center center">
                                <span ng-click="diagnosticsList.docSearchReset()" class="diag-filter-drop-arrow"><i class="material-icons" aria-hidden="true">{{ctrl.labelType.dropdownArrow}}</i></span>
                            </div>
                        </div> -->
            <div
              ng-if="!diagnosticsList.isAnyReportSelected"
              layout="row"
              flex
              class="outline-none-class"
            >
              <div flex="50" style="margin-top: 16px">
                <span
                  ng-if="diagnosticsList.reportView"
                  style="font-size: 14px; white-space: nowrap; color: #757575"
                  ><%= translate('REPORT_TYPE') %></span
                >
                <span
                  ng-if="!diagnosticsList.reportView"
                  style="font-size: 14px; white-space: nowrap; color: #757575"
                  ><%= translate('REPORT_TYPE') %></span
                >
              </div>
              <!-- <i class="material-icons" aria-hidden="true" aria-hidden="true" ng-click="diagnosticsList.toggleReportOrLabView()">list</i> -->
              <md-switch
                flex="20"
                ng-disabled="false"
                ng-model="diagnosticsList.reportView"
                ng-change="diagnosticsList.toggleReportOrLabView(false)"
                aria-label="{{flowSheets.dateAgeToggle}}"
                class="md-primary diagnostic-switch"
                md-no-ink
              >
              </md-switch>
              <i
                flex="20"
                class="fa fa-filter rotate payment-filter-icon diagnostics-row-margin-right diagnostic-advance-filter"
                aria-hidden="true"
                ng-click="diagnosticsList.toggleSideNav()"
                id="filterDiagnostics"
                aria-hidden="true"
              ></i>
            </div>

            <div
              ng-if="diagnosticsList.isAnyReportSelected"
              class="diagnosis-print-button-div"
            >
              <button
                ng-click="diagnosticsList.printCombinedPdf(diagnosticsList.data,blockUI, unBlockUI)"
                class="margin-top-10 no-transition md-button ladda-button ladda-gery-button height-32 float-right bottom-margin-0"
                data-style="slide-left"
                layout="row"
                layout-align="space-around center"
              >
                <i
                  aria-hidden="true"
                  class="material-icons font-24px white-font padding-right-6"
                  >print</i
                >
                <span class="font-14-point-7 white-font"> Print </span>
              </button>
            </div>
          </div>

          <div
            ng-if="diagnosticsList.reportView"
            layout
            class="diagnosis-test-row"
            layout-wrap
            layout-align="center start"
            ng-repeat="diagnosis in diagnosticsList.data"
            ng-class="{'diagnosis-active-tab': (diagnosticsList.activeTestId == diagnosis.ReportConceptCode) && diagnosticsList.toggleActive,
              'diagnosis-tab-expanded': diagnosticsList.expand && (diagnosticsList.activeTestId == diagnosis.ReportConceptCode)}"
            div-dynamic-height
            test-number="{{diagnosis.Reports.length}}"
            div-height="64"
            add-div-height="46"
            expand-div="{{diagnosticsList.expand }} {{diagnosticsList.activeTestId == diagnosis.ReportConceptCode}}"
          >
            <div flex="10" class="text-align-center padding-top-20">
              <md-checkbox
                ng-hide="diagnosis.Reports.length > 1"
                ng-change="diagnosticsList.checkIfAnyReportSelected(diagnosticsList.data)"
                class="margin-bottom-0"
                ng-disabled="diagnosis.Reports.length > 1 || (diagnosis.Reports[0].category == 'Laboratory' && !diagnosis.Reports[0].url) || (diagnosticsList.blockCheckBoxes && !diagnosis.Reports[0].selected) || (diagnosticsList.labCheckBoxes && !(diagnosis.Reports[0].category == 'Laboratory'))"
                id="usePrimary "
                name="primary "
                ng-model="diagnosis.Reports[0].selected"
              >
              </md-checkbox>
            </div>

            <div
              flex="80"
              layout="column"
              layout-align="center start"
              class="outline-none"
              style="height: 64px"
              ng-class="{'max-width-90': diagnosis.Reports.length == 1}"
              ng-click="diagnosticsList.openDiagnosticsDetails(diagnosis.Reports[0].reportId, diagnosis.Reports[0].reportName, $index, blockUI, unBlockUI, patientId, true, null, diagnosis.Reports[0].reportType, diagnosis.Reports[0].reportResult)"
            >
              <div class="margin-left-0">
                <span class="diagnosis-test-name"
                  >{{diagnosis.Reports[0].reportName}}</span
                >
              </div>
              <div
                layout
                class="margin-left-0 trim-text-diagnosis"
                style="width: 95%"
              >
                <div>
                  <i
                    class="material-icons diagnosis-icon-style-row"
                    aria-hidden="true"
                    >{{ctrl.labelType.locationCity}}</i
                  >
                  <span
                    class="diagnosis-test-info"
                    ng-class="{'diagnosis-details-break': !(diagnosticsList.expand && (diagnosticsList.activeTestId == diagnosis.ReportConceptCode))}"
                  >
                    {{diagnosis.Reports[0].category}}
                  </span>
                </div>
                <div
                  ng-if="!(diagnosticsList.expand && (diagnosticsList.activeTestId == diagnosis.ReportConceptCode))"
                >
                  <i
                    class="material-icons diagnosis-icon-style-row"
                    aria-hidden="true"
                    >{{ctrl.labelType.event}}</i
                  >
                  <span class="diagnosis-test-info-light"
                    >{{diagnosis.Reports[0].date}}</span
                  >
                  <i
                    class="material-icons diagnosis-icon-style-row"
                    aria-hidden="true"
                    style="margin-left: 5px"
                    >{{ctrl.labelType.accessTime}}</i
                  >
                  <span
                    class="diagnosis-test-info-light"
                    ng-class="{'diagnosis-details-break': diagnosis.Reports[0].referringPractitionerName}"
                    >{{diagnosis.Reports[0].time}}</span
                  >
                </div>
                <div
                  layout
                  ng-if="diagnosis.Reports[0].referringPractitionerName && !(diagnosticsList.expand && (diagnosticsList.activeTestId == diagnosis.ReportConceptCode))"
                  class="trim-text-diagnosis line-height-8"
                >
                  <i
                    class="material-icons diagnosis-icon-style-row"
                    aria-hidden="true"
                    >{{ctrl.labelType.personIcon}}</i
                  >
                  <span
                    class="diagnosis-test-info-practitioner trim-text-diagnosis"
                    >{{diagnosis.Reports[0].referringPractitionerName}}</span
                  >
                </div>
              </div>
            </div>
            <!-- Grouping Button -->
            <div
              flex="10"
              layout
              layout-align="center center"
              style="height: 64px"
              ng-if="diagnosis.Reports.length > 1"
            >
              <md-button
                class="md-fab md-mini diagnosis-group-btn"
                aria-label="Use Android"
                ng-class="{'diagnosis-group-btn-active': diagnosticsList.expand && (diagnosticsList.activeTestId == diagnosis.ReportConceptCode)}"
              >
                <span class="diagnosis-group-btn-span"
                  >{{diagnosis.Reports.length}}</span
                >
              </md-button>
            </div>
            <!-- Group Rows-->
            <div
              layout
              layout-align="start center"
              flex="100"
              ng-show="diagnosticsList.expand && diagnosticsList.activeTestId == diagnosis.ReportConceptCode"
              ng-repeat="diagnosisRow in diagnosis.Reports"
              class="diagnosis-group-row"
              ng-class="{'diagnosis-active-subtab': ((diagnosticsList.activeSubTestId == diagnosisRow.reportId) && diagnosticsList.toggleSubRowActive)}"
            >
              <div flex="10" class="text-align-center margin-left-10">
                <md-checkbox
                  ng-disabled="!diagnosisRow.url"
                  ng-change="diagnosticsList.checkIfAnyReportSelected(diagnosticsList.data)"
                  class="margin-bottom-0"
                  id="usePrimary "
                  name="primary "
                  ng-model="diagnosisRow.selected"
                >
                </md-checkbox>
              </div>
              <div
                flex="60"
                class="margin-left-0 padding-top-14-point-5 diagnosis-active-subtab-content-height-width outline-none"
                ng-click="diagnosticsList.openExpandedRowDetails(diagnosisRow, diagnosis.Reports[0].reportName, blockUI, unBlockUI, $index, $parent.$index); $event.stopPropagation()"
              >
                <i
                  class="material-icons diagnosis-icon-style-row"
                  aria-hidden="true"
                  >{{ctrl.labelType.event}}</i
                >
                <span class="diagnosis-group-row-span"
                  >{{diagnosisRow.date}}</span
                >

                <i
                  class="material-icons diagnosis-icon-style-row"
                  aria-hidden="true"
                  style="margin-left: 5px"
                  >{{ctrl.labelType.accessTime}}</i
                >
                <span
                  class="diagnosis-group-row-span"
                  ng-class="{'diagnosis-details-break': diagnosisRow.referringPractitionerName}"
                  >{{diagnosisRow.time}}</span
                >
              </div>
              <div
                flex="30"
                ng-if="diagnosisRow.referringPractitionerName"
                class="padding-top-14-point-5 diagnosis-active-subtab-content-height-width"
                ng-click="diagnosticsList.openExpandedRowDetails(diagnosisRow, diagnosis.Reports[0].reportName, blockUI, unBlockUI, $index, $parent.$index); $event.stopPropagation()"
              >
                <i
                  class="material-icons diagnosis-icon-style-row"
                  aria-hidden="true"
                  >{{ctrl.labelType.personIcon}}</i
                >
                <span class="diagnosis-group-row-span"
                  >{{diagnosisRow.referringPractitionerName}}</span
                >
              </div>
            </div>
          </div>

          <div
            ng-if="!diagnosticsList.reportView"
            layout
            class="diagnosis-test-row"
            layout-wrap
            layout-align="center start"
            ng-repeat="diagnosis in diagnosticsList.data"
            ng-class="{'diagnosis-active-tab': (diagnosticsList.activeTestId == diagnosis.ReportConceptCode) && diagnosticsList.toggleActive,
              'diagnosis-tab-expanded': diagnosticsList.expand && (diagnosticsList.activeTestId == diagnosis.ReportConceptCode)}"
            div-dynamic-height
            test-number="{{diagnosis.Reports.length}}"
            div-height="64"
            add-div-height="46"
            expand-div="{{diagnosticsList.expand }} {{diagnosticsList.activeTestId == diagnosis.ReportConceptCode}}"
          >
            <!-- <div flex="10" class="text-align-center padding-top-20  ">
                            <md-checkbox ng-change="diagnosticsList.checkIfAnyReportSelected(diagnosticsList.data)" class="margin-bottom-0" ng-disabled="diagnosis.Reports.length > 1 || !diagnosis.Reports[0].url" id="usePrimary " name="primary " ng-model="diagnosis.Reports[0].selected">
                            </md-checkbox>
                        </div> -->
            <div
              flex="80"
              layout="column"
              layout-align="center start"
              class="outline-none padding-left-16"
              style="height: 64px"
              ng-class="{'max-width-90': diagnosis.Reports.length == 1}"
              ng-click="diagnosticsList.openDiagnosticsDetails(diagnosis.Reports[0].reportId, diagnosis.Reports[0].reportName, $index, blockUI, unBlockUI, patientId, true, null, diagnosis.Reports[0].reportType,diagnosis.Reports[0].reportResult)"
            >
              <div class="margin-left-0">
                <span class="diagnosis-test-name"
                  >{{diagnosis.ReportConceptCode}}</span
                >
              </div>
              <div
                layout
                class="margin-left-0 trim-text-diagnosis"
                style="width: 95%"
              >
                <div>
                  <i
                    class="material-icons diagnosis-icon-style-row"
                    aria-hidden="true"
                    >{{ctrl.labelType.locationCity}}</i
                  >
                  <span
                    class="diagnosis-test-info"
                    ng-class="{'diagnosis-details-break': !(diagnosticsList.expand && (diagnosticsList.activeTestId == diagnosis.ReportConceptCode))}"
                  >
                    {{diagnosis.Reports[0].category}}
                  </span>
                </div>
                <div
                  ng-if="!(diagnosticsList.expand && (diagnosticsList.activeTestId == diagnosis.ReportConceptCode))"
                >
                  <i
                    class="material-icons diagnosis-icon-style-row"
                    aria-hidden="true"
                    >{{ctrl.labelType.event}}</i
                  >
                  <span class="diagnosis-test-info-light"
                    >{{diagnosis.Reports[0].date}}</span
                  >
                  <i
                    class="material-icons diagnosis-icon-style-row"
                    aria-hidden="true"
                    style="margin-left: 5px"
                    >{{ctrl.labelType.accessTime}}</i
                  >
                  <span
                    class="diagnosis-test-info-light"
                    ng-class="{'diagnosis-details-break': diagnosis.Reports[0].referringPractitionerName}"
                    >{{diagnosis.Reports[0].time}}</span
                  >
                </div>
                <div
                  layout
                  ng-if="diagnosis.Reports[0].referringPractitionerName && !(diagnosticsList.expand && (diagnosticsList.activeTestId == diagnosis.ReportConceptCode))"
                  class="trim-text-diagnosis"
                >
                  <i
                    class="material-icons diagnosis-icon-style-row"
                    aria-hidden="true"
                    >{{ctrl.labelType.personIcon}}</i
                  >
                  <span
                    class="diagnosis-test-info-practitioner trim-text-diagnosis"
                    >{{diagnosis.Reports[0].referringPractitionerName}}</span
                  >
                </div>
              </div>
            </div>
            <div flex="10" class="text-align-center padding-top-20">
              <i
                aria-hidden="true"
                ng-if="diagnosis.Reports[0].category== 'Laboratory' && diagnosis.Reports.length>1"
                ng-click="diagnosticsList.printReport(diagnosis.Reports[0].workOrderId,null,null,null,blockUI, unBlockUI)"
                class="blue-color material-icons font-24px padding-right-6"
                >print</i
              >
              <i
                aria-hidden="true"
                ng-if="diagnosis.Reports[0].category== 'Laboratory' && diagnosis.Reports.length==1"
                ng-click="diagnosticsList.printReport(null,null,diagnosis.Reports[0].url,null,blockUI, unBlockUI)"
                class="blue-color material-icons font-24px padding-right-6"
                >print</i
              >
              <i
                aria-hidden="true"
                ng-if="diagnosis.Reports[0].category!= 'Laboratory' && diagnosis.Reports.length==1"
                ng-click="diagnosticsList.printReport(null,null,null,diagnosis.Reports[0].reportResult,blockUI, unBlockUI)"
                class="blue-color material-icons font-24px padding-right-6"
                >print</i
              >
            </div>
            <!-- Grouping Button -->
            <div
              flex="10"
              layout
              layout-align="center center"
              style="height: 64px"
              ng-if="diagnosis.Reports.length > 1"
            >
              <md-button
                class="md-fab md-mini diagnosis-group-btn"
                aria-label="Use Android"
                ng-class="{'diagnosis-group-btn-active': diagnosticsList.expand && (diagnosticsList.activeTestId == diagnosis.ReportConceptCode)}"
              >
                <span class="diagnosis-group-btn-span"
                  >{{diagnosis.Reports.length}}</span
                >
              </md-button>
            </div>
            <!-- Group Rows-->
            <div
              layout
              layout-align="start center"
              flex="100"
              ng-show="diagnosticsList.expand && diagnosticsList.activeTestId == diagnosis.ReportConceptCode"
              ng-repeat="diagnosisRow in diagnosis.Reports"
              class="diagnosis-group-row padding-left-32"
              ng-class="{'diagnosis-active-subtab': ((diagnosticsList.activeSubTestId == diagnosisRow.reportId) && diagnosticsList.toggleSubRowActive)}"
            >
              <!-- <div flex="10" class="text-align-center margin-left-10">
                                <md-checkbox ng-disabled="!diagnosisRow.url" ng-change="diagnosticsList.checkIfAnyReportSelected(diagnosticsList.data)" class="margin-bottom-0 " id="usePrimary " name="primary " ng-model="diagnosisRow.selected">
                                </md-checkbox>
                            </div> -->
              <div
                layout
                class="margin-left-0 padding-top-14-point-5 diagnosis-active-subtab-content-height-width outline-none"
                ng-click="diagnosticsList.openExpandedRowDetails(diagnosisRow, diagnosisRow.reportName, blockUI, unBlockUI, $index, $parent.$index); $event.stopPropagation()"
              >
                <span
                  flex="30"
                  style="margin-right: 10px"
                  class="truncate diagnosis-group-row-span"
                  >{{diagnosisRow.reportName}}</span
                >
                <i
                  class="material-icons diagnosis-icon-style-row"
                  aria-hidden="true"
                  >{{ctrl.labelType.event}}</i
                >
                <span class="diagnosis-group-row-span"
                  >{{diagnosisRow.date}}</span
                >
                <i
                  class="material-icons diagnosis-icon-style-row"
                  aria-hidden="true"
                  style="margin-left: 5px"
                  >{{ctrl.labelType.accessTime}}</i
                >
                <span
                  class="diagnosis-group-row-span"
                  ng-class="{'diagnosis-details-break': diagnosisRow.referringPractitionerName}"
                  >{{diagnosisRow.time}}</span
                >
              </div>
              <div
                ng-if="diagnosisRow.referringPractitionerName"
                class="truncate"
              >
                <i
                  class="material-icons diagnosis-icon-style-row"
                  aria-hidden="true"
                  >{{ctrl.labelType.personIcon}}</i
                >
                <span class="diagnosis-group-row-span"
                  >{{diagnosisRow.referringPractitionerName}}</span
                >
              </div>
              <i
                aria-hidden="true"
                ng-if="diagnosisRow.category== 'Laboratory'"
                ng-click="diagnosticsList.printReport(null,null,diagnosisRow.url,null,blockUI, unBlockUI)"
                class="blue-color material-icons font-24px padding-right-6"
                >print</i
              >
              <i
                aria-hidden="true"
                ng-if="diagnosisRow.category!= 'Laboratory'"
                ng-click="diagnosticsList.printReport(null,null,null,diagnosisRow.reportResult,blockUI, unBlockUI)"
                class="blue-color material-icons font-24px padding-right-6"
                >print</i
              >
            </div>
          </div>
        </div>
      </div>
      <div class="cover-bar cover-bar-diag"></div>
    </div>
  </div>

  <div flex="65">
    <div class="scroll-bar-wrap background-white">
      <div class="scroll-box diagnosis-table-scroll position-relative">
        <md-sidenav
          class="md-sidenav-left diagnosis-filters-advanced"
          md-component-id="diagAdvancedFilters"
        >
          <md-toolbar class="md-theme-dark">
            <md-button
              ng-click="diagnosticsList.close()"
              class="filter-close-button"
            >
              <i class="material-icons" aria-hidden="true"
                >{{ctrl.labelType.clearIcon}}</i
              >
              <span><%= translate('CLOSE') %> </span>
            </md-button>
          </md-toolbar>
          <md-content layout-padding>
            <form>
              <md-input-container class="filter-input-container">
                <label for="testName">Test Name</label>
                <input
                  type="text"
                  id="testName"
                  ng-model="diagnosticsList.diagTestName"
                />
              </md-input-container>

              <div ng-hide="true" class="diag-adFilter-drop">
                <search-drop-down
                  class="healthcare-service"
                  id="autoCompleteDepart"
                  country-flag="false"
                  style="height: 44px; width: 200px"
                  selected-item="diagnosticsList.adSelectedDiagDepart"
                  items="diagnosticsList.departFilterElems"
                  label="Department"
                  search-text="diagnosticsList.search.departSearchText"
                  name="department"
                  no-floating-label="true"
                  ng-cloak
                >
                </search-drop-down>
              </div>
              <div ng-hide="true" class="diag-adFilter-drop">
                <search-drop-down
                  class="healthcare-service"
                  id="autoCompleteDoc"
                  country-flag="false"
                  style="height: 44px; width: 200px"
                  selected-item="diagnosticsList.adSelectedDiagDoc"
                  items="diagnosticsList.docFilterElems"
                  label="Referring Doctor"
                  search-text="diagnosticsList.search.docSearchText"
                  name="doctor"
                  no-floating-label="true"
                  ng-cloak
                >
                </search-drop-down>
              </div>
              <div class="diag-adFilter-date">
                <hmis-date-picker
                  label="From"
                  tab-index="14"
                  id="diagFrom"
                  input-id="endsOnId"
                  name="diagFrom"
                  ng-model="diagnosticsList.diagFrom"
                  form="scheduleForm"
                  class="doctorsCalenderDatePicker"
                  ng-change="diagnosticsList.checkEndDate()"
                  date-format="<%= translate('DATEFORMAT_KENDO') %>"
                >
                </hmis-date-picker>

                <div
                  ng-show="diagnosticsList.endDateError"
                  class="end-date-error encounter-list-end-date-error"
                >
                  <%= translate('DIAGNOSTICS_DATE_ERROR') %>
                </div>
              </div>
              <div class="diag-adFilter-date">
                <hmis-date-picker
                  label="To"
                  tab-index="14"
                  id="diagTo"
                  input-id="endsOnId"
                  name="diagTo"
                  ng-model="diagnosticsList.diagTo"
                  form="scheduleForm"
                  class="doctorsCalenderDatePicker"
                  ng-change="diagnosticsList.checkEndDate()"
                  date-format="<%= translate('DATEFORMAT_KENDO') %>"
                >
                </hmis-date-picker>
              </div>
            </form>
            <md-button
              class="clear-all-button blue-color filter-done-btn"
              ng-click="!diagnosticsList.endDateError && diagnosticsList.searchAdvanced(patientId, false)"
              style="float: right"
            >
              <div
                layout="row"
                layout-align="center center"
                style="height: 100%"
              >
                <i class="header-edit-icon material-icons" aria-hidden="true"
                  >{{ctrl.labelType.doneIcon}}</i
                >
                <span class="edit-button-text"
                  ><%= translate('DONE_BUTTON_TITLE') %>
                </span>
              </div>
            </md-button>
            <md-button
              ng-click="diagnosticsList.clearAllFilters(patientId)"
              class="clear-all-button filter-clear-all-btn"
              style="float: right"
            >
              <div
                layout="row"
                layout-align="center center"
                style="height: 100%"
              >
                <i class="header-edit-icon material-icons" aria-hidden="true"
                  >{{ctrl.labelType.clearIcon}}</i
                >
                <span class="edit-button-text"
                  ><%= translate('CLEAR_ALL') %>
                </span>
              </div>
            </md-button>
          </md-content>
        </md-sidenav>
        <div
          layout="column"
          layout-align="center center"
          ng-if="!diagnosticsList.detailsView && !diagnosticsList.cardView && !diagnosticsList.cardViewTypeTwo && !diagnosticsList.cardViewTypeThree && !diagnosticsList.crpReportView"
          class="diagnosis-empty-view-icon"
        >
          <img
            height="200"
            width="200"
            ng-src="{{diagnosticsList.labImagepath}}"
            alt="lab icon"
          />
          <span class="diagnosis-empty-view-text"
            >Please first select your desired report for which you want to
            visit</span
          >
        </div>

        <!-- <div ng-if="diagnosticsList.crpReportView" style="height: calc(100vh - 36px); overflow-y: hidden;"> -->
        <div ng-if="diagnosticsList.crpReportView" style="height: auto">
          <div
            id="diagnostics-CRP-report-view"
            class="position-relative height-100-percent"
          ></div>
        </div>

        <div flex class="diagnosis-details" ng-if="diagnosticsList.detailsView">
          <div layout="row" flex class="diagnosis-card-details-header">
            <div layout flex="90" layout-align="start center">
              {{diagnosticsList.activeTestName}}
            </div>
            <div
              layout
              flex="10"
              layout-align="end center"
              ng-click="diagnosticsList.retrieveCardView(blockUI, unBlockUI)"
              class="diagnosis-details-menu-icon"
            >
              <i class="material-icons" aria-hidden="true"
                >{{ctrl.labelType.viewModuleIcon}}</i
              >
            </div>
          </div>

          <div flex>
            <div layout="row" flex class="diagnosis-table-header">
              <div
                flex="15"
                layout
                layout-align="start center"
                class="diagnosis-table-header-label"
              >
                <span><%= translate('MEASUREMENTS_HEADER') %></span>
              </div>
              <div flex="15" layout layout-align="start center">
                <span class="diagnosis-table-header-label"
                  ><%= translate('NORMAL_RANGE') %></span
                >
              </div>
              <!--  Present Date Test Date Header-->
              <div
                flex="20"
                layout
                layout-align="start center"
                class="diagnosis-current-test"
              >
                <span class="diagnosis-table-header-date"
                  >{{diagnosticsList.history[0].date}}</span
                >
                <span class="diagnosis-table-header-time margin-top-4"
                  >({{diagnosticsList.history[0].time}})</span
                >
              </div>
              <!-- History Dates of Test Result-->
              <div
                flex="50"
                layout="row"
                layout-align="center center"
                class="background-grey diagnosis-table-height"
              >
                <div flex="10">
                  <i
                    class="material-icons diagnosis-active-arrow-left"
                    aria-hidden="true"
                    ng-class="{'diagnosis-disabled-arrow-left': ((diagnosticsList.indexDiagnosisOffset <= 0) || diagnosticsList.indexDiagnosisOffset==null)}"
                    ng-click="diagnosticsList.showPreviousResults()"
                    tabindex="-1"
                    >keyboard_arrow_left
                  </i>
                </div>
                <div flex="40" class="margin-left-8px">
                  <span class="diagnosis-table-header-date"
                    >{{diagnosticsList.history[1 +
                    diagnosticsList.indexDiagnosisOffset].date}}</span
                  >
                  <span
                    class="diagnosis-table-header-time"
                    ng-if="diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset].time"
                    >({{diagnosticsList.history[1 +
                    diagnosticsList.indexDiagnosisOffset].time}})</span
                  >
                </div>
                <div flex="40">
                  <span class="diagnosis-table-header-date"
                    >{{diagnosticsList.history[2 +
                    diagnosticsList.indexDiagnosisOffset].date}}</span
                  >
                  <span
                    class="diagnosis-table-header-time"
                    ng-if="diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset].time"
                    >({{diagnosticsList.history[2 +
                    diagnosticsList.indexDiagnosisOffset].time}})</span
                  >
                </div>
                <div flex="10">
                  <i
                    class="material-icons diagnosis-active-arrow-right"
                    aria-hidden="true"
                    ng-class="{'diagnosis-disabled-arrow-right': ((diagnosticsList.indexDiagnosisOffset >= diagnosticsList.maxTestResults) || diagnosticsList.indexDiagnosisOffset==null)}"
                    ng-click="diagnosticsList.showNextResults()"
                    tabindex="-1"
                    >keyboard_arrow_right
                  </i>
                </div>
              </div>
            </div>

            <!-- Table Body Data -->
            <div
              layout="column"
              flex
              class="diagnosis-table-body"
              ng-repeat="diagData in diagnosticsList.history[0].Components track by $index"
            >
              <div layout="row" flex>
                <div flex="15" layout layout-align="start center">
                  <span class="diagnosis-component-name trim-text-diagnosis"
                    >{{diagData.observationName}}</span
                  >
                </div>
                <div flex="15" layout layout-align="start center">
                  <span ng-if="!diagData.normalRangeDisplayValue"
                    >{{diagData.observationReferenceRangeLowValue}} -
                    {{diagData.observationReferenceRangeHighValue}}</span
                  >
                  <span ng-if="diagData.normalRangeDisplayValue"
                    >{{diagData.normalRangeDisplayValue}}</span
                  >
                </div>
                <!--  Present Date Test Result-->
                <div
                  flex="20"
                  layout
                  layout-align="start center"
                  class="diagnosis-current-test"
                  ng-if="!$last"
                >
                  <span
                    class="truncate"
                    ng-class="{'diagnosis-dangerZone': diagnosticsList.history[0].Components[$index].isIntensive}"
                    ng-bind-html="diagnosticsList.history[0].Components[$index].observationValue"
                  ></span>
                  <span
                    ng-if="!diagnosticsList.history[0].Components[$index].observationValue.length"
                    >---</span
                  >
                  <span
                    class="margin-left-8px diagnosis-param-details-unit margin-top-2px"
                    >{{diagnosticsList.history[0].Components[$index].observationUOM}}</span
                  >
                  <span
                    ng-if="diagnosticsList.history[0].Components[$index].observationValue.length > 0"
                    class="diagnostic-copy-investigation"
                    ><img
                      title="Click to copy in investigation"
                      class="no-outline-no-border diagnostic-copy-icon"
                      track-click-event="Diagnostics - Copy Observation Value"
                      ng-click="diagnosticsList.copyObservationValueAdmissionDiagnostics(diagnosticsList.history[0], diagnosticsList.history[0].Components[$index], discharge.dischargeSheet.encounterID, true)"
                      ng-src="../resources/img/diagnostic-copy.png"
                      alt=""
                      width="16"
                      height="16"
                      role="button"
                      tabindex="0"
                      aria-hidden="false"
                  /></span>
                  <!-- <span class="diagnostic-copy-investigation"><i title="Click to copy in investigation" class="material-icons diagnostic-copy-icon-material" aria-hidden="true" ng-click="diagnosticsList.copyObservationValue(chiefComplaint, diagnosticsList.history[0],diagnosticsList.history[0].Components[$index], startEncounter)">{{ctrl.labelType.copyContent}}</i>
                                    </span> -->
                </div>
                <!-- Render Comment for present test -->
                <div
                  layout
                  flex="20"
                  layout-align="start center"
                  class="diagnosis-current-test"
                  ng-if="$last"
                >
                  <i
                    class="material-icons diagnosis-info-icon"
                    aria-hidden="true"
                    ng-hide="!diagnosticsList.history[0].Comments"
                    ng-click="diagnosticsList.showCommentIconClicked(0)"
                    outside-click="diagnosticsList.hideComment()"
                  >
                    info
                  </i>
                  <div
                    class="diagnosis-hover-box"
                    ng-show="diagnosticsList.showCommentIndex == 0"
                  >
                    <div class="diagnosis-arrow-box">
                      <img
                        id="attachment-note-image-feild"
                        ng-src="../resources/img/popover-arrow.png"
                        height="20"
                        width="20"
                        alt="popover arrow"
                      />
                    </div>
                    <div class="diagnosis-hover-box-content">
                      <p
                        class="comment-style"
                        ng-bind-html="diagnosticsList.history[0].Comments"
                      ></p>
                    </div>
                  </div>
                  <span ng-if="!diagnosticsList.history[0].Comments">---</span>
                </div>
                <!-- History Test Results -->
                <div
                  flex="50"
                  layout
                  layout-align="center center"
                  class="background-grey diagnosis-table-height"
                >
                  <div
                    layout="row"
                    flex="40"
                    ng-if="!$last"
                    class="margin-left-8px diagnostic-history"
                  >
                    <span
                      ng-class="{'diagnosis-dangerZone': diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset].Components[$index].isIntensive}"
                      ng-bind-html="diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset].Components[$index].observationValue"
                    ></span>
                    <span
                      ng-if="!diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset].Components[$index].observationValue"
                      >---</span
                    >
                    <span
                      class="margin-left-8px diagnosis-param-details-unit"
                      style="margin-top: 2px"
                      >{{diagnosticsList.history[1 +
                      diagnosticsList.indexDiagnosisOffset].Components[$index].observationUOM}}</span
                    >
                    <span
                      ng-if="diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset].Components[$index].observationValue.length > 0"
                      class="diagnostic-copy-investigation"
                      ><img
                        title="Click to copy in investigation"
                        class="no-outline-no-border diagnostic-copy-icon"
                        ng-src="../resources/img/diagnostic-copy.png"
                        track-click-event="Diagnostics - Copy Observation Value"
                        ng-click="diagnosticsList.copyObservationValueAdmissionDiagnostics(diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset], diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset].Components[$index], discharge.dischargeSheet.encounterID, true)"
                        alt=""
                        width="16"
                        height="16"
                        role="button"
                        tabindex="0"
                        aria-hidden="false"
                    /></span>
                    <!-- <span ng-if="diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset].Components[$index].observationValue.length > 0" class="diagnostic-copy-investigation"><i title="Click to copy in investigation" style="margin-top:3px" class="material-icons diagnostic-copy-icon-material" aria-hidden="true" ng-click="diagnosticsList.copyObservationValue(chiefComplaint, diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset],diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset].Components[$index], startEncounter)">{{ctrl.labelType.copyContent}}</i>
                                        </span> -->
                  </div>
                  <div
                    layout="row"
                    flex="40"
                    ng-if="!$last"
                    class="diagnostic-history"
                  >
                    <span
                      ng-class="{'diagnosis-dangerZone': diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset].Components[$index].isIntensive}"
                      ng-bind-html="diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset].Components[$index].observationValue"
                    ></span>
                    <span
                      ng-if="!diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset].Components[$index].observationValue"
                      >---</span
                    >
                    <span
                      class="margin-left-8px diagnosis-param-details-unit"
                      style="margin-top: 2px"
                      >{{diagnosticsList.history[2 +
                      diagnosticsList.indexDiagnosisOffset].Components[$index].observationUOM}}</span
                    >
                    <span
                      ng-if="diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset].Components[$index].observationValue.length > 0"
                      class="diagnostic-copy-investigation"
                      ><img
                        title="Click to copy in investigation"
                        class="no-outline-no-border diagnostic-copy-icon"
                        ng-src="../resources/img/diagnostic-copy.png"
                        track-click-event="Diagnostics - Copy Observation Value"
                        ng-click="diagnosticsList.copyObservationValueAdmissionDiagnostics(diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset], diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset].Components[$index], discharge.dischargeSheet.encounterID, true)"
                        alt=""
                        width="16"
                        height="16"
                        role="button"
                        tabindex="0"
                        aria-hidden="false"
                    /></span>
                    <!-- <span ng-if="diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset].Components[$index].observationValue.length > 0" class="diagnostic-copy-investigation"><i title="Click to copy in investigation" style="margin-top:3px" class="material-icons diagnostic-copy-icon-material" aria-hidden="true" ng-click="diagnosticsList.copyObservationValue(chiefComplaint, diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset],diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset].Components[$index], startEncounter)">{{ctrl.labelType.copyContent}}</i> -->
                    <!-- </span> -->
                  </div>
                  <!-- Render Comments -->
                  <div flex="40" ng-if="$last" class="margin-left-8px">
                    <i
                      class="material-icons diagnosis-info-icon"
                      aria-hidden="true"
                      ng-hide="!diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset].Comments"
                      ng-click="diagnosticsList.showCommentIconClicked(1 + diagnosticsList.indexDiagnosisOffset)"
                      outside-click="diagnosticsList.hideComment()"
                    >
                      info
                    </i>
                    <div
                      class="diagnosis-hover-box-history"
                      ng-show="diagnosticsList.showCommentIndex == 1 + diagnosticsList.indexDiagnosisOffset"
                    >
                      <div class="diagnosis-arrow-box">
                        <img
                          id="attachment-note-image-feild"
                          ng-src="../resources/img/popover-arrow.png"
                          alt="image"
                          height="20"
                          width="20"
                        />
                      </div>
                      <div class="diagnosis-hover-box-content">
                        <p
                          class="comment-style"
                          ng-bind-html="diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset].Comments"
                        ></p>
                      </div>
                    </div>
                    <span
                      ng-if="!diagnosticsList.history[1 + diagnosticsList.indexDiagnosisOffset].Comments"
                      >---</span
                    >
                  </div>
                  <div flex="40" ng-if="$last">
                    <i
                      class="material-icons diagnosis-info-icon"
                      aria-hidden="true"
                      ng-hide="!diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset].Comments"
                      ng-click="diagnosticsList.showCommentIconClicked(2 + diagnosticsList.indexDiagnosisOffset)"
                      outside-click="diagnosticsList.hideComment()"
                    >
                      info
                    </i>
                    <div
                      class="diagnosis-hover-box-history"
                      ng-show="diagnosticsList.showCommentIndex == 2 + diagnosticsList.indexDiagnosisOffset"
                    >
                      <div class="diagnosis-arrow-box">
                        <img
                          id="attachment-note-image-feild"
                          ng-src="../resources/img/popover-arrow.png"
                          alt="image"
                          height="20"
                          width="20"
                        />
                      </div>
                      <div class="diagnosis-hover-box-content">
                        <p
                          class="comment-style"
                          ng-bind-html="diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset].Comments"
                        ></p>
                      </div>
                    </div>
                    <span
                      ng-if="!diagnosticsList.history[2 + diagnosticsList.indexDiagnosisOffset].Comments"
                      >---</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Card View -->
        <div flex class="diagnosis-details" ng-if="diagnosticsList.cardView">
          <div layout="row" flex class="diagnosis-card-details-header">
            <div layout flex="90" layout-align="start center">
              {{diagnosticsList.activeTestName}}
            </div>
            <div
              ng-if="diagnosticsList.reportView"
              layout
              flex="10"
              layout-align="end center"
              ng-click="diagnosticsList.displayTableView(patientId,blockUI, unBlockUI)"
              class="diagnosis-details-menu-icon"
            >
              <i class="material-icons" aria-hidden="true"
                >{{ctrl.labelType.viewList}}</i
              >
            </div>
          </div>

          <div flex class="diagnosis-card-view-header">
            <div
              layout
              layout-align="start center"
              class="margin-left-0 diagnosis-table-height"
            >
              <i class="material-icons diagnosis-icon-style" aria-hidden="true"
                >{{ctrl.labelType.event}}</i
              >
              <span>{{diagnosticsList.cardViewInfo.date}}</span>
              <i
                class="material-icons diagnosis-icon-style"
                aria-hidden="true"
                style="margin-left: 5px"
                >{{ctrl.labelType.accessTime}}</i
              >
              <span
                ng-class="{'diagnosis-card-break': diagnosticsList.cardViewInfo.practitionerName}"
                >{{diagnosticsList.cardViewInfo.time}}</span
              >
              <span ng-if="diagnosticsList.cardViewInfo.practitionerName">
                <i
                  class="material-icons diagnosis-icon-style"
                  aria-hidden="true"
                  style="margin-left: 5px"
                  >{{ctrl.labelType.personIcon}}</i
                >
                <span class="position-upwards-3px"
                  >{{diagnosticsList.cardViewInfo.practitionerName}}</span
                >
              </span>
            </div>
          </div>
          <div layout layout-wrap class="diagnosis-card-container">
            <div
              layout="column"
              flex="33"
              ng-repeat="diagnosis in diagnosticsList.details"
              class="margin-top-13"
            >
              <div
                layout
                layout-align="center start"
                class="diagnosis-card-param-name"
              >
                {{diagnosis.observationName}}
              </div>
              <div
                ng-mouseover="showCopyDiagnosticsIcon = true"
                ng-mouseleave="showCopyDiagnosticsIcon = false"
                layout
                layout-align="center center"
                class="padding-top-bottom-6"
                ng-class="{'diagnosis-card-border-left': (($index + 1) % 3 == 0) || (($index + 2) % 3 == 0) }"
              >
                <span
                  style="margin-left: 8px"
                  class="diagnosis-card-param-value"
                  ng-class="{'diagnosis-dangerZone': diagnosis.isIntensive}"
                  ng-bind-html="diagnosis.observationValue"
                ></span>
                <span class="margin-left-8px"
                  >{{diagnosis.observationUOM}}</span
                >
                <!-- <md-button style=" width: 25px; padding: 0px;  height: 25px; margin-left: -8px;" class="md-icon-button" aria-label="More">
                                    <i style="font-size: 18px;" class="material-icons" aria-hidden="true0" ng-click="diagnosticsList.copyObservationValueAdmissionDiagnostics(diagnosticsList.cardViewInfo, diagnosis, discharge.dischargeSheet.encounterID, true)" >content_copy</i>
                                </md-button> -->
                <span ng-show="showCopyDiagnosticsIcon">
                  <img
                    title="Click to copy in investigation"
                    style="margin-left: 0px"
                    class="no-outline-no-border diagnostic-copy-icon"
                    ng-src="../resources/img/diagnostic-copy.png"
                    track-click-event="Diagnostics - Copy Observation Value"
                    ng-click="diagnosticsList.copyObservationValueAdmissionDiagnostics(diagnosticsList.cardViewInfo, diagnosis, discharge.dischargeSheet.encounterID, true)"
                    alt=""
                    width="16"
                    height="16"
                    role="button"
                    tabindex="0"
                    aria-hidden="false"
                /></span>
              </div>
              <div
                layout
                layout-align="center end"
                class="diagnosis-card-param-range"
                ng-if="diagnosis.observationReferenceRangeLowValue || diagnosis.normalRangeDisplayValue"
              >
                <span>Normal Range: </span>
                <span
                  ng-if="!diagnosis.normalRangeDisplayValue"
                  class="margin-left-8px"
                  >{{diagnosis.observationReferenceRangeLowValue}} -
                  {{diagnosis.observationReferenceRangeHighValue}}</span
                >
                <span
                  ng-if="diagnosis.normalRangeDisplayValue"
                  class="margin-left-8px"
                  >{{diagnosis.normalRangeDisplayValue}}</span
                >
                <span class="margin-left-8px">{{diagnosis.unit}}</span>
              </div>
            </div>
            <div layout="column" flex="100" class="diagnosis-card-comment">
              <div class="diagnosis-card-comment-header">
                <%= translate('COMMENTS') %>
              </div>
              <div
                class="diagnosis-card-comment-body"
                ng-bind-html="diagnosticsList.cardViewInfo.conclusion"
              ></div>
            </div>

            <div layout="column" flex="100" class="diagnosis-card-comment">
              <div
                ng-if="diagnosticsList.details.attachments.length"
                id="attachment-note-block"
                class="readOnly-template-details-block"
              >
                <div class="diagnosis-card-comment-header">
                  <span><%= translate('ATTACHMENTS') %></span>
                </div>
                <div
                  class="readOnly-template-details-block-detail layout-wrap"
                  style="display: inline-flex"
                >
                  <div
                    id="attachment-note-feild"
                    ng-show="diagnosticsList.details.attachments.length>0"
                    ng-repeat="attachment in diagnosticsList.details.attachments"
                    class="attachments-container"
                  >
                    <div
                      class="check-image-display"
                      ng-click="examination.openImageInNewTab(attachment.url+attachment.fileName)"
                    >
                      <img
                        ng-if="!attachment.fileDisplayName.endsWith('.pdf')"
                        id="attachment-image-field"
                        width=""
                        height=""
                        class="readonly-examination-image click-no-outline"
                        ng-src="{{attachment.url+attachment.fileName}}"
                        alt="document"
                      />
                      <img
                        ng-if="attachment.fileDisplayName.endsWith('.pdf')"
                        id="attachment-image-field"
                        width=""
                        height=""
                        class="readonly-examination-image click-no-outline"
                        src="../resources/img/pdf_doc_icon.jpg"
                        alt="document"
                      />
                    </div>
                    <div class="check-image-bar" layout="row">
                      <span
                        id="attachment-note-name-feild"
                        class="image-file-name trim-text"
                        style="width: 222px !important"
                        >{{attachment.fileDisplayName}}</span
                      >
                      <div class="check-icon-container">
                        <div class="full-box">
                          <i
                            class="material-icons attachment-info-icon"
                            aria-hidden="true"
                            ng-click="attachment.showComment=!attachment.showComment"
                            >{{ctrl.labelType.info}}</i
                          >
                        </div>
                        <div
                          class="attachment-hover-box"
                          ng-show="attachment.showComment && attachment.name!='' && attachment.comments!=''"
                        >
                          <div
                            class="attachment-hover-box-content"
                            id="attachment-note-comments-feild"
                          >
                            <p class="comment-style">{{attachment.comments}}</p>
                          </div>
                          <div class="attachment-arrow-box">
                            <img
                              id="attachment-note-image-feild"
                              class=""
                              style="transform: rotate(270deg)"
                              ng-src="../resources/img/popover-arrow.png"
                              height="20"
                              width="20"
                              alt="document"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Card View Type 2 -->
        <div
          flex
          class="diagnosis-details"
          ng-if="diagnosticsList.cardViewTypeTwo"
        >
          <div layout="row" flex class="diagnosis-card-details-header">
            <div layout flex="90" layout-align="start center">
              {{diagnosticsList.activeTestName}}
            </div>
          </div>

          <div flex class="diagnosis-card-view-header">
            <div
              layout
              layout-align="start center"
              class="margin-left-0 diagnosis-table-height"
            >
              <i class="material-icons diagnosis-icon-style" aria-hidden="true"
                >{{ctrl.labelType.event}}</i
              >
              <span>{{diagnosticsList.cardViewInfo.date}}</span>
              <i
                class="material-icons diagnosis-icon-style"
                aria-hidden="true"
                style="margin-left: 5px"
                >{{ctrl.labelType.accessTime}}</i
              >
              <span
                ng-class="{'diagnosis-card-break': diagnosticsList.cardViewInfo.practitionerName}"
                >{{diagnosticsList.cardViewInfo.time}}</span
              >
              <span ng-if="diagnosticsList.cardViewInfo.practitionerName">
                <i
                  class="material-icons diagnosis-icon-style"
                  aria-hidden="true"
                  style="margin-left: 5px"
                  >{{ctrl.labelType.personIcon}}</i
                >
                <span class="position-upwards-3px"
                  >{{diagnosticsList.cardViewInfo.practitionerName}}</span
                >
              </span>
            </div>
          </div>
          <div class="diagnosis-card-container">
            <div layout="column" flex="100" class="diagnosis-card-comment">
              <div class="diagnosis-card-comment-header">
                <%= translate('DETAILS') %>
              </div>
              <div class="diagnosis-card-comment-body">
                {{diagnosticsList.cardViewInfo.observationValue}}
              </div>
            </div>
            <div layout="column" flex="100" class="diagnosis-card-comment">
              <div class="diagnosis-card-comment-header">
                <%= translate('COMMENTS') %>
              </div>
              <ul
                ng-repeat="comment in diagnosticsList.cardViewInfo.observationComment"
              >
                <li ng-if="!$last">{{comment}}</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Card view Type-3 -->
        <div
          flex
          class="diagnosis-details"
          ng-if="diagnosticsList.cardViewTypeThree"
        >
          <div layout="row" flex class="diagnosis-card-details-header">
            <div layout flex="90" layout-align="start center">
              {{diagnosticsList.activeTestName}}
            </div>
          </div>

          <div flex class="diagnosis-card-view-header">
            <div
              layout
              layout-align="start center"
              class="margin-left-0 diagnosis-table-height"
            >
              <i class="material-icons diagnosis-icon-style" aria-hidden="true"
                >{{ctrl.labelType.event}}</i
              >
              <span>{{diagnosticsList.cardViewInfo.date}}</span>
              <i
                class="material-icons diagnosis-icon-style"
                aria-hidden="true"
                style="margin-left: 5px"
                >{{ctrl.labelType.accessTime}}</i
              >
              <span
                ng-class="{'diagnosis-card-break': diagnosticsList.cardViewInfo.practitionerName}"
                >{{diagnosticsList.cardViewInfo.time}}</span
              >
              <span ng-if="diagnosticsList.cardViewInfo.practitionerName">
                <i
                  class="material-icons diagnosis-icon-style"
                  aria-hidden="true"
                  style="margin-left: 5px"
                  >{{ctrl.labelType.personIcon}}</i
                >
                <span class="position-upwards-3px"
                  >{{diagnosticsList.cardViewInfo.practitionerName}}</span
                >
              </span>
            </div>
          </div>
          <div class="diagnosis-card-container-3">
            <div
              layout="column"
              flex="100"
              class="diagnosis-card-comment-3"
              ng-if="diagnosticsList.cardViewInfo.conclusion"
            >
              <div class="diagnosis-card-comment-header">
                {{diagnosticsList.activeTestName}}
              </div>
              <div
                class="diagnosis-card-comment-body"
                ng-bind-html="diagnosticsList.cardViewInfo.conclusion"
              ></div>
            </div>
            <div
              layout="column"
              flex="100"
              ng-repeat="paramList in diagnosticsList.details"
              class="diagnosis-param-body"
              style="max-height: max-content"
            >
              <div
                ng-hide="diagnosticsList.hideReportSectionName(paramList)"
                class="diagnosis-param-group-header"
              >
                <span>{{paramList[0].categoryName}}</span>
              </div>

              <div
                ng-hide="diagnosticsList.hideReportSectionName(paramList)"
                layout
                layout-wrap
              >
                <div
                  layout="column"
                  flex="33"
                  class="diagnosis-param-group-elements"
                  ng-repeat="paramItem in paramList"
                  ng-if="paramItem.observationValueType != 'Descriptive'"
                >
                  <div
                    layout
                    layout-align="center start"
                    class="diagnosis-card-param-name"
                  >
                    {{paramItem.observationName}}
                  </div>
                  <div
                    ng-mouseover="showCopyDiagnosticsIcon = true"
                    ng-mouseleave="showCopyDiagnosticsIcon = false"
                    layout
                    layout-align="center center"
                    class="padding-top-bottom-6"
                    ng-class="{'diagnosis-card-border-left': (($index + 1) % 3 == 0) || (($index + 2) % 3 == 0) }"
                  >
                    <span
                      style="margin-left: 8px"
                      class="diagnosis-card-param-value"
                      ng-class="{'diagnosis-dangerZone': paramItem.isIntensive}"
                      ng-bind-html="paramItem.observationValue"
                    ></span>
                    <span class="margin-left-8px"
                      >{{paramItem.observationUOM}}</span
                    >
                    <!-- <md-button style=" width: 25px; padding: 0px;  height: 25px; margin-left: -8px;" class="md-icon-button" aria-label="More">
                                            <i style="font-size: 18px;" class="material-icons" aria-hidden="true0" ng-click="diagnosticsList.copyObservationValueAdmissionDiagnostics(diagnosticsList.cardViewInfo, paramItem,  discharge.dischargeSheet.encounterID, true)" >content_copy</i>
                                        </md-button> -->
                    <span ng-show="showCopyDiagnosticsIcon"
                      ><img
                        title="Click to copy in investigation"
                        style="margin-left: 0px"
                        class="no-outline-no-border diagnostic-copy-icon"
                        ng-src="../resources/img/diagnostic-copy.png"
                        track-click-event="Diagnostics - Copy Observation Value"
                        ng-click="diagnosticsList.copyObservationValueAdmissionDiagnostics(diagnosticsList.cardViewInfo, paramItem,  discharge.dischargeSheet.encounterID, true)"
                        alt=""
                        width="16"
                        height="16"
                        role="button"
                        tabindex="0"
                        aria-hidden="false"
                    /></span>
                  </div>
                  <div
                    layout
                    layout-align="center end"
                    class="diagnosis-card-param-range"
                    ng-if="paramItem.observationReferenceRangeLowValue || paramItem.normalRangeDisplayValue"
                  >
                    <span>Normal Range: </span>
                    <span
                      ng-if="!paramItem.normalRangeDisplayValue"
                      class="margin-left-8px"
                      >{{paramItem.observationReferenceRangeLowValue}} -
                      {{paramItem.observationReferenceRangeHighValue}}</span
                    >
                    <span
                      ng-if="paramItem.normalRangeDisplayValue"
                      class="margin-left-8px"
                      >{{paramItem.normalRangeDisplayValue}}</span
                    >
                    <span class="margin-left-8px">{{paramItem.unit}}</span>
                  </div>
                </div>
                <div
                  layout="column"
                  class="margin-left-0"
                  flex="100"
                  ng-repeat="paramComment in paramList"
                  ng-if="paramComment.observationValueType == 'Descriptive'"
                >
                  <div class="diagnosis-card-comment-header">
                    {{paramComment.observationName}}
                  </div>
                  <div
                    ng-mouseover="showCopyDiagnosticsIcon = true"
                    ng-mouseleave="showCopyDiagnosticsIcon = false"
                    style="margin-left: 8px"
                    class="diagnosis-card-comment-body"
                  >
                    {{paramComment.observationValue}}
                    <!-- <md-button style=" width: 25px; padding: 0px;  height: 25px; margin-left: -8px;" class="md-icon-button" aria-label="More">
                                            <i style="font-size: 18px;" class="material-icons" aria-hidden="true0" ng-click="diagnosticsList.copyObservationValueAdmissionDiagnostics(diagnosticsList.cardViewInfo, paramComment, discharge.dischargeSheet.encounterID, true)" >content_copy</i>
                                        </md-button> -->
                    <span ng-show="showCopyDiagnosticsIcon"
                      ><img
                        title="Click to copy in investigation"
                        style="margin-left: 0px"
                        class="no-outline-no-border diagnostic-copy-icon"
                        ng-src="../resources/img/diagnostic-copy.png"
                        track-click-event="Diagnostics - Copy Observation Value"
                        ng-click="diagnosticsList.copyObservationValueAdmissionDiagnostics(diagnosticsList.cardViewInfo, paramComment, discharge.dischargeSheet.encounterID, true)"
                        alt=""
                        width="16"
                        height="16"
                        role="button"
                        tabindex="0"
                        aria-hidden="false"
                    /></span>
                  </div>
                </div>
              </div>
            </div>
            <div layout="column" flex="100" class="diagnosis-card-comment">
              <div
                ng-if="diagnosticsList.details.attachments.length"
                id="attachment-note-block"
                class="readOnly-template-details-block"
              >
                <div class="diagnosis-card-comment-header">
                  <span><%= translate('ATTACHMENTS') %></span>
                </div>
                <div
                  class="readOnly-template-details-block-detail layout-wrap"
                  style="display: inline-flex"
                >
                  <div
                    id="attachment-note-feild"
                    ng-show="diagnosticsList.details.attachments.length>0"
                    ng-repeat="attachment in diagnosticsList.details.attachments"
                    class="attachments-container"
                  >
                    <div
                      class="check-image-display"
                      ng-click="examination.openImageInNewTab(attachment.url+attachment.fileName)"
                    >
                      <img
                        ng-if="!attachment.fileDisplayName.endsWith('.pdf')"
                        id="attachment-image-field"
                        width=""
                        height=""
                        class="readonly-examination-image click-no-outline"
                        ng-src="{{attachment.url+attachment.fileName}}"
                        alt="document"
                      />
                      <img
                        ng-if="attachment.fileDisplayName.endsWith('.pdf')"
                        id="attachment-image-field"
                        width=""
                        height=""
                        class="readonly-examination-image click-no-outline"
                        src="../resources/img/pdf_doc_icon.jpg"
                        alt="document"
                      />
                    </div>
                    <div class="check-image-bar" layout="row">
                      <span
                        id="attachment-note-name-feild"
                        class="image-file-name trim-text"
                        style="width: 222px !important"
                        >{{attachment.fileDisplayName}}</span
                      >
                      <div class="check-icon-container">
                        <div class="full-box">
                          <i
                            class="material-icons attachment-info-icon"
                            aria-hidden="true"
                            ng-click="attachment.showComment=!attachment.showComment"
                            >{{ctrl.labelType.info}}</i
                          >
                        </div>
                        <div
                          class="attachment-hover-box"
                          ng-show="attachment.showComment && attachment.name!='' && attachment.comments!=''"
                        >
                          <div
                            class="attachment-hover-box-content"
                            id="attachment-note-comments-feild"
                          >
                            <p class="comment-style">{{attachment.comments}}</p>
                          </div>
                          <div class="attachment-arrow-box">
                            <img
                              id="attachment-note-image-feild"
                              class=""
                              style="transform: rotate(270deg)"
                              ng-src="../resources/img/popover-arrow.png"
                              height="20"
                              width="20"
                              alt="document"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
